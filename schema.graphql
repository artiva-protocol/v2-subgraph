type Platform @entity {
  id: ID!
  users: [PlatformUser!]! @derivedFrom(field: "platform")
  posts: [Post!]! @derivedFrom(field: "platform")
  metadataJSON: String
  contentAddedTimestamp: String
  metadataUpdatedTimestamp: String!
  deployedAtTimestamp: String!
}

type Bundle @entity {
  id: ID!
  posts: [Post!]! @derivedFrom(field: "bundle")
  length: Int!
}

type Post @entity {
  id: ID!
  postId: String!
  contentJSON: String!
  type: String!
  bundle: Bundle!
  platform: Platform!
  owner: PlatformUser!
  setAtTimestamp: String!
  tags: [PostTag!]! @derivedFrom(field: "post")
}

type Tag @entity {
  id: ID!
  posts: [PostTag!]! @derivedFrom(field: "tag")
}

type PostTag @entity {
  id: ID!
  tag: Tag!
  post: Post!
}

type PlatformUser @entity {
  id: ID!
  user: Bytes!
  platform: Platform!
  admin: Boolean
  contentPublisher: Boolean
  metadataManager: Boolean
  posts: [Post!]! @derivedFrom(field: "owner")
}
